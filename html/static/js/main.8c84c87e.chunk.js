(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{248:function(e,t,a){e.exports=a(482)},253:function(e,t,a){},267:function(e,t,a){},481:function(e,t,a){},482:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(7),i=a.n(s),l=(a(253),a(68)),o=a(130),c=a(59),u={USERNAME:"USERNAME"};function m(e){return{type:u.USERNAME,userName:e}}var p={userName:""},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.USERNAME:return Object(c.a)({},e,{userName:t.userName});default:return e}},h=a(20),f=a(21),g=a(23),b=a(22),E=a(24),y=a(57),v=a(80),O=(a(258),a(227)),A=a(228),k=a.n(A),C=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{locale:k.a},r.a.createElement("div",{className:"App"},this.props.children))}}]),t}(n.Component),I=(a(483),a(102)),j=(a(265),a(111)),S=(a(267),[{title:"\u9996\u9875",key:"/home"},{title:"\u7528\u6237\u7ba1\u7406",key:"/users"},{title:"\u8d44\u4ea7\u7ba1\u7406",key:"/assets"},{title:"\u6388\u6743\u7ba1\u7406",key:"/perms"}]),w=j.a.Header,L=j.a.Content,x=j.a.Footer,V=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=window.location.hash.replace(/^.*#|\?.*$/g,"");return r.a.createElement("div",{className:"admin"},r.a.createElement(j.a,null,r.a.createElement(w,{style:{position:"fixed",zIndex:1,width:"100%",height:50}},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"logo.png",alt:""}),r.a.createElement("b",null,"JMS\u8df3\u677f\u673a")),r.a.createElement(I.b,{theme:"dark",mode:"horizontal",style:{lineHeight:"50px"},selectedKeys:[e]},S.map(function(e){return r.a.createElement(I.b.Item,{key:e.key},r.a.createElement(y.b,{to:e.key},e.title))}),r.a.createElement("div",{className:"user"},r.a.createElement("span",{style:{padding:"0 15px"}},this.props.userName),r.a.createElement(y.b,{to:"/login"},r.a.createElement("span",null,"\u767b\u51fa")))))),r.a.createElement(L,{style:{padding:"0 50px",marginTop:75}},r.a.createElement("div",{className:"content"},this.props.children)),r.a.createElement(x,{style:{textAlign:"center"}},"JMS \xa92019 \u8fd0\u7ef4\u8df3\u677f\u673a")))}}]),t}(r.a.Component),D=Object(l.b)(function(e){return{userName:e.userName}})(V),U=(a(157),a(81)),F=(a(127),a(50)),P=(a(88),a(38)),_=(a(89),a(40)),R=(a(90),a(26)),T=(a(118),a(67)),z=(a(61),a(15)),G=(a(119),a(33)),N=(a(91),a(27)),K=(a(120),a(36)),q=(a(106),a(29)),M=(a(92),a(18)),B=a(232),J=a.n(B),W=a(140),H=a.n(W),$={getToken:function(){return H.a.get("Token")},setToken:function(e){return H.a.set("Token",e)},removeToken:function(){return H.a.remove("Token")}},Q={login:function(e,t){return Y({url:"/api-token-auth/",method:"post",data:{username:e,password:t}})},getInfo:function(){return Y({url:"/userinfo/",method:"get"})},refresh:function(e){return Y({url:"/api-token-refresh/",method:"post",data:{token:e}})}},X=J.a.create({baseURL:"api",timeout:5e3});X.interceptors.request.use(function(e){return $.getToken()&&(e.headers.Authorization="JWT "+$.getToken()),e},function(e){return console.log(e),Promise.reject(e)}),X.interceptors.response.use(function(e){return"api/api-token-refresh/"!==e.config.url&&"api/api-token-auth/"!==e.config.url&&function(){var e=$.getToken();e&&Q.refresh(e).then(function(e){$.setToken(e.token)})}(),e.data},function(e){return 401===e.response.status?(N.a.error("\u767b\u5f55\u8d85\u65f6"),window.location.href="#/login"):403===e.response.status?N.a.error("\u6743\u9650\u62d2\u7edd"):500===e.response.status&&N.a.error("\u670d\u52a1\u5668\u9519\u8bef"),console.log(e.response),Promise.reject(e)});var Y=X,Z={getUserList:function(e){return Y({url:"/users/",method:"get",params:e})},getUserLists:function(){return Y({url:"/userlists/",method:"get"})},createUser:function(e){return Y({url:"/users/",method:"post",data:e})},updateUser:function(e,t){return Y({url:"/users/".concat(e,"/"),method:"patch",data:t})},deleteUser:function(e){return Y({url:"/users/".concat(e,"/"),method:"delete"})}},ee={pagination:function(e){return{total:e.count,showSizeChanger:!0,showQuickJumper:!0,current:e.page,pageSize:e.page_size,pageSizeOptions:["10","20","50","100"],showTotal:function(){return"\u5171".concat(e.count,"\u6761")}}}},te=M.a.Search,ae=M.a.TextArea,ne=q.a.Item,re=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],loading:!1,pagination:"",title:"",isVisible:!1,userInfo:"",userForm:"",type:""},a.params={page:1,page_size:10,username:""},a.fetchData=function(){a.setState({loading:!0}),Z.getUserList(a.params).then(function(e){var t=ee.pagination(Object(c.a)({},a.params,{count:e.count}));a.setState({data:e.results,loading:!1,pagination:t})})},a.handleSearch=function(e){a.params.username=e,a.fetchData()},a.handleTableChange=function(e,t,n){a.params.page=e.current,a.params.page_size=e.pageSize,a.fetchData()},a.handleUserCreate=function(){a.setState({isVisible:!0,title:"\u6dfb\u52a0\u7528\u6237",type:"create"})},a.handleUserEdit=function(e){a.setState({isVisible:!0,title:"\u7f16\u8f91\u7528\u6237",userInfo:e,type:"edit"})},a.handleUserDelete=function(e){var t=e.id;K.a.confirm({title:"\u5220\u9664\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u7528\u6237 ".concat(e.username," \u5417?"),onOk:function(){Z.deleteUser(t).then(function(e){N.a.success("\u5220\u9664\u6210\u529f",1),a.fetchData()})},onCancel:function(){N.a.info("\u53d6\u6d88\u5220\u9664",1)}})},a.handleSubmit=function(){var e=a.userForm.props.form.getFieldsValue();a.userForm.props.form.validateFields(function(t,n){if(!t){if("create"===a.state.type)Z.createUser(e).then(function(t){N.a.success("\u7528\u6237 ".concat(e.username," \u6dfb\u52a0\u6210\u529f"),1),a.fetchData()});else{var r=a.state.userInfo.id;Z.updateUser(r,e).then(function(t){N.a.success("\u7528\u6237 ".concat(e.username," \u4fee\u6539\u6210\u529f"),1),a.fetchData()})}a.handleCancel()}})},a.handleCancel=function(){a.userForm.props.form.resetFields(),a.setState({isVisible:!1,userInfo:""})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=[{title:"id",dataIndex:"id"},{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7ba1\u7406\u5458",dataIndex:"is_superuser",render:function(e){return!0===e?r.a.createElement(G.a,{color:"blue"},"\u542f\u7528"):r.a.createElement(G.a,{color:"red"},"\u7981\u7528")}},{title:"Active",dataIndex:"is_active",render:function(e){return!0===e?r.a.createElement(G.a,{color:"blue"},"\u542f\u7528"):r.a.createElement(G.a,{color:"red"},"\u7981\u7528")}},{title:"\u6700\u540e\u767b\u5f55\u65f6\u95f4",dataIndex:"last_login"},{title:"\u5907\u6ce8",dataIndex:"remark"},{title:"\u64cd\u4f5c",width:150,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(z.a,{type:"primary",size:"small",onClick:function(){return e.handleUserEdit(a)}},"\u7f16\u8f91"),r.a.createElement(T.a,{type:"vertical"}),r.a.createElement(z.a,{type:"danger",size:"small",onClick:function(){return e.handleUserDelete(a)}},"\u5220\u9664"))}}];return r.a.createElement("div",null,r.a.createElement(P.a,{bordered:!1},r.a.createElement(_.a,null,r.a.createElement(R.a,{span:12},r.a.createElement(te,{onChange:function(t){return e.handleSearch(t.target.value)},placeholder:"\u641c\u7d22\u7528\u6237\u540d\u6216\u59d3\u540d",enterButton:!0,allowClear:!0})),r.a.createElement(R.a,{span:12,style:{textAlign:"right"}},r.a.createElement(z.a,{type:"primary",style:{marginRight:15},onClick:this.handleUserCreate},"\u6dfb\u52a0\u7528\u6237")))),r.a.createElement(P.a,{bordered:!1},r.a.createElement(F.a,{size:"small",columns:t,rowKey:function(e){return e.id},dataSource:this.state.data,loading:{spinning:this.state.loading,tip:"\u52a0\u8f7d\u4e2d..."},pagination:this.state.pagination,onChange:this.handleTableChange})),r.a.createElement(K.a,{width:600,title:this.state.title,visible:this.state.isVisible,onOk:this.handleSubmit,onCancel:this.handleCancel},r.a.createElement(se,{type:this.state.type,userInfo:this.state.userInfo,wrappedComponentRef:function(t){return e.userForm=t}})))}}]),t}(r.a.Component),se=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.userInfo,t=this.props.type,a=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(q.a,Object.assign({layout:"horizontal"},{labelCol:{span:5},wrapperCol:{span:16}}),r.a.createElement(ne,{label:"\u7528\u6237\u540d"},a("username",{initialValue:e.username,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]})(r.a.createElement(M.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",disabled:"admin"===e.username}))),r.a.createElement(ne,{label:"\u59d3\u540d"},a("name",{initialValue:e.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}]})(r.a.createElement(M.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),r.a.createElement(ne,{label:"\u90ae\u7bb1"},a("email",{initialValue:e.email,rules:[{type:"email",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u5730\u5740"},{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740"}]})(r.a.createElement(M.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740"}))),r.a.createElement(ne,{label:"\u5bc6\u7801"},a("password",{initialValue:e.password,rules:[{required:"create"===t,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]})(r.a.createElement(M.a,{type:"password"}))),r.a.createElement(ne,{label:"\u7ba1\u7406\u5458"},a("is_superuser",{valuePropName:"checked",initialValue:e.is_superuser})(r.a.createElement(U.a,null))),r.a.createElement(ne,{label:"Active"},a("is_active",{valuePropName:"checked",initialValue:""===e||e.is_active})(r.a.createElement(U.a,null))),r.a.createElement(ne,{label:"\u5907\u6ce8"},a("remark",{initialValue:e.remark})(r.a.createElement(ae,null)))))}}]),t}(r.a.Component);se=q.a.create({})(se);a(199);var ie=a(101),le=(a(455),a(244)),oe=(a(198),a(72)),ce={getAssetList:function(e){return Y({url:"/assets/",method:"get",params:e})},getAssetLists:function(){return Y({url:"/assetlists/",method:"get"})},createAsset:function(e){return Y({url:"/assets/",method:"post",data:e})},updateAsset:function(e,t){return Y({url:"/assets/".concat(e,"/"),method:"patch",data:t})},deleteAsset:function(e){return Y({url:"/assets/".concat(e,"/"),method:"delete"})}},ue={getGroupList:function(e){return Y({url:"/assetgroups/",method:"get",params:e})},getGroupLists:function(){return Y({url:"/assetgrouplists/",method:"get"})},createGroup:function(e){return Y({url:"/assetgroups/",method:"post",data:e})},updateGroup:function(e,t){return Y({url:"/assetgroups/".concat(e,"/"),method:"patch",data:t})},deleteGroup:function(e){return Y({url:"/assetgroups/".concat(e,"/"),method:"delete"})},getGroupAssetsList:function(e){return Y({url:"/groupassets/".concat(e,"/"),method:"get"})}},me=M.a.Search,pe=M.a.TextArea,de=q.a.Item,he=oe.a.Option,fe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],groupList:[],loading:!1,pagination:"",title:"",isVisible:!1,assetInfo:"",assetForm:"",type:""},a.params={page:1,page_size:10,hostname:""},a.fetchData=function(){a.setState({loading:!0}),ce.getAssetList(a.params).then(function(e){var t=ee.pagination(Object(c.a)({},a.params,{count:e.count}));a.setState({data:e.results,loading:!1,pagination:t})})},a.getGroupList=function(){ue.getGroupLists().then(function(e){a.setState({groupList:e})})},a.handleSearch=function(e){a.params.hostname=e,a.fetchData()},a.handleTableChange=function(e,t,n){a.params.page=e.current,a.params.page_size=e.pageSize,a.fetchData()},a.handleOperator=function(e){var t="create"===e?"\u6dfb\u52a0\u8d44\u4ea7":"\u7f16\u8f91\u8d44\u4ea7";a.setState({isVisible:!0,title:t,type:e}),a.getGroupList()},a.handleAssetEdit=function(e){a.setState({assetInfo:e}),a.handleOperator("edit")},a.handleAssetDelete=function(e){var t=e.id;K.a.confirm({title:"\u5220\u9664\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8d44\u4ea7 ".concat(e.hostname," \u5417?"),onOk:function(){ce.deleteAsset(t).then(function(e){N.a.success("\u5220\u9664\u6210\u529f"),a.fetchData()})},onCancel:function(){N.a.info("\u53d6\u6d88\u5220\u9664")}})},a.handleSubmit=function(){var e=a.assetForm.props.form.getFieldsValue();a.assetForm.props.form.validateFields(function(t,n){if(!t){if("create"===a.state.type)ce.createAsset(e).then(function(t){N.a.success("\u8d44\u4ea7 ".concat(e.hostname," \u521b\u5efa\u6210\u529f")),a.fetchData()});else{var r=a.state.assetInfo.id;ce.updateAsset(r,e).then(function(t){N.a.success("\u8d44\u4ea7 ".concat(e.hostname," \u4fee\u6539\u6210\u529f")),a.fetchData()})}a.handleCancel()}})},a.handleCancel=function(){a.assetForm.props.form.resetFields(),a.setState({isVisible:!1,assetInfo:""})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=[{title:"id",dataIndex:"id"},{title:"\u4e3b\u673a\u540d",dataIndex:"hostname"},{title:"IP\u5730\u5740",dataIndex:"ip"},{title:"\u7aef\u53e3",dataIndex:"port"},{title:"\u8fdc\u7a0b\u767b\u5f55\u8d26\u53f7",dataIndex:"username"},{title:"Active",dataIndex:"is_active",render:function(e){return!0===e?r.a.createElement(G.a,{color:"blue"},"\u542f\u7528"):r.a.createElement(G.a,{color:"red"},"\u7981\u7528")}},{title:"\u8d44\u4ea7\u7ec4",dataIndex:"group.name"},{title:"\u5907\u6ce8",dataIndex:"remark"},{title:"\u64cd\u4f5c",width:150,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(z.a,{type:"primary",size:"small",onClick:function(){return e.handleAssetEdit(a)}},"\u7f16\u8f91"),r.a.createElement(T.a,{type:"vertical"}),r.a.createElement(z.a,{type:"danger",size:"small",onClick:function(){return e.handleAssetDelete(a)}},"\u5220\u9664"))}}];return r.a.createElement("div",null,r.a.createElement(P.a,{bordered:!1},r.a.createElement(_.a,null,r.a.createElement(R.a,{span:12},r.a.createElement(me,{onChange:function(t){return e.handleSearch(t.target.value)},placeholder:"\u641c\u7d22\u4e3b\u673a\u540d\u6216IP\u5730\u5740",enterButton:!0,allowClear:!0})),r.a.createElement(R.a,{span:12,style:{textAlign:"right"}},r.a.createElement(z.a,{type:"primary",style:{marginRight:15},onClick:function(){return e.handleOperator("create")}},"\u6dfb\u52a0\u8d44\u4ea7")))),r.a.createElement(P.a,{bordered:!1},r.a.createElement(F.a,{size:"small",columns:t,rowKey:function(e){return e.id},dataSource:this.state.data,loading:{spinning:this.state.loading,tip:"\u52a0\u8f7d\u4e2d..."},pagination:this.state.pagination,onChange:this.handleTableChange})),r.a.createElement(K.a,{width:600,title:this.state.title,visible:this.state.isVisible,onOk:this.handleSubmit,onCancel:this.handleCancel},r.a.createElement(ge,{type:this.state.type,assetInfo:this.state.assetInfo,groupList:this.state.groupList,wrappedComponentRef:function(t){return e.assetForm=t}})))}}]),t}(r.a.Component),ge=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.assetInfo,t=this.props.assetInfo.group||{},a=this.props.type,n=this.props.groupList,s=this.props.form.getFieldDecorator;return r.a.createElement("div",null,r.a.createElement(q.a,Object.assign({layout:"horizontal"},{labelCol:{span:5},wrapperCol:{span:16}}),r.a.createElement(de,{label:"\u4e3b\u673a\u540d"},s("hostname",{initialValue:e.hostname,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4e3b\u673a\u540d"}]})(r.a.createElement(M.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u4e3b\u673a\u540d"}))),r.a.createElement(de,{label:"IP\u5730\u5740"},s("ip",{initialValue:e.ip,rules:[{required:!0,message:"\u8bf7\u8f93\u5165IP\u5730\u5740"}]})(r.a.createElement(M.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165IP\u5730\u5740"}))),r.a.createElement(de,{label:"\u7aef\u53e3"},s("port",{initialValue:e.port||22,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7aef\u53e3"}]})(r.a.createElement(le.a,{min:1,max:65535}))),r.a.createElement(de,{label:"\u8fdc\u7a0b\u767b\u5f55\u8d26\u53f7"},s("username",{initialValue:e.username,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8fdc\u7a0b\u767b\u5f55\u8d26\u53f7"}]})(r.a.createElement(M.a,{type:"text"}))),r.a.createElement(de,{label:"\u8fdc\u7a0b\u767b\u5f55\u5bc6\u7801"},s("password",{initialValue:e.password,rules:[{required:"create"===a,message:"\u8bf7\u8f93\u5165\u8fdc\u7a0b\u767b\u5f55\u5bc6\u7801"},{min:6,max:32,message:"\u5bc6\u7801\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e6\u5927\u4e8e32"}]})(r.a.createElement(M.a,{type:"password"}))),r.a.createElement(de,{label:"Active"},s("is_active",{valuePropName:"checked",initialValue:""===e||e.is_active})(r.a.createElement(U.a,{defaultChecked:!0}))),r.a.createElement(de,{label:"\u8d44\u4ea7\u7ec4"},s("group",{initialValue:t.id})(r.a.createElement(oe.a,null,n.map(function(e){return r.a.createElement(he,{value:e.id},e.name)})))),r.a.createElement(de,{label:"\u5907\u6ce8"},s("remark",{initialValue:e.remark})(r.a.createElement(pe,null)))))}}]),t}(r.a.Component);ge=q.a.create({})(ge);a(222);var be=a(137),Ee=M.a.Search,ye=M.a.TextArea,ve=q.a.Item,Oe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],loading:!1,pagination:"",isAssetListVisible:!1,groupAssetsData:[],groupAssetsLoading:!1,isVisible:!1,assetList:[],title:"",type:"",assetGroupForm:"",assetGroupInfo:""},a.params={page:1,page_size:10,name__icontains:""},a.fetchData=function(){a.setState({loading:!0}),ue.getGroupList(a.params).then(function(e){var t=ee.pagination(Object(c.a)({},a.params,{count:e.count}));a.setState({data:e.results,loading:!1,pagination:t})})},a.getGroupAssets=function(e){a.setState({groupAssetsLoading:!0}),ue.getGroupAssetsList(e).then(function(e){a.setState({groupAssetsData:e.results,groupAssetsLoading:!1})})},a.getAssetList=function(){ce.getAssetLists().then(function(e){a.setState({assetList:e})})},a.handleSearch=function(e){a.params.name__icontains=e,a.fetchData()},a.handleTableChange=function(e,t,n){a.params.page=e.current,a.params.page_size=e.pageSize,a.fetchData()},a.handleOperator=function(e){var t="create"===e?"\u6dfb\u52a0\u8d44\u4ea7\u7ec4":"\u7f16\u8f91\u8d44\u4ea7\u7ec4";a.setState({isVisible:!0,title:t,type:e}),a.getAssetList()},a.handleAssetGroupEdit=function(e){a.getGroupAssets(e.id),a.setState({assetGroupInfo:e}),a.handleOperator("edit")},a.handleCancel=function(){a.assetGroupForm.props.form.resetFields(),a.setState({isVisible:!1,assetGroupInfo:""})},a.handleSubmit=function(){var e=a.assetGroupForm.props.form.getFieldsValue();a.assetGroupForm.props.form.validateFields(function(t,n){if(!t){if("create"===a.state.type)ue.createGroup(e).then(function(t){N.a.success("\u8d44\u4ea7\u7ec4 ".concat(e.name," \u521b\u5efa\u6210\u529f"),1),a.fetchData()});else{var r=a.state.assetGroupInfo.id;ue.updateGroup(r,e).then(function(t){N.a.success("\u8d44\u4ea7 ".concat(e.name," \u4fee\u6539\u6210\u529f"),1),a.fetchData()})}a.handleCancel()}})},a.handleAssetGroupDelete=function(e){var t=e.id;K.a.confirm({title:"\u5220\u9664\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u8d44\u4ea7\u7ec4 ".concat(e.name," \u5417?"),onOk:function(){ue.deleteGroup(t).then(function(e){N.a.success("\u5220\u9664\u6210\u529f",1),a.fetchData()})},onCancel:function(){N.a.info("\u53d6\u6d88\u5220\u9664",1)}})},a.handleShowAssetList=function(e){a.setState({isAssetListVisible:!0}),a.getGroupAssets(e)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=[{title:"id",dataIndex:"id"},{title:"\u7ec4\u540d",dataIndex:"name"},{title:"\u8d44\u4ea7",dataIndex:"asset_count",render:function(t,a){return r.a.createElement("a",{href:"javascript:;",onClick:function(){return e.handleShowAssetList(a.id)}},"\u8d44\u4ea7\u5217\u8868(",t,")")}},{title:"\u5907\u6ce8",dataIndex:"remark"},{title:"\u64cd\u4f5c",width:150,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(z.a,{type:"primary",size:"small",onClick:function(){return e.handleAssetGroupEdit(a)}},"\u7f16\u8f91"),r.a.createElement(T.a,{type:"vertical"}),r.a.createElement(z.a,{type:"danger",size:"small",onClick:function(){return e.handleAssetGroupDelete(a)}},"\u5220\u9664"))}}],a=[{title:"id",dataIndex:"id"},{title:"\u4e3b\u673a\u540d",dataIndex:"hostname"},{title:"IP\u5730\u5740",dataIndex:"ip"},{title:"\u7aef\u53e3",dataIndex:"port"},{title:"\u8fdc\u7a0b\u767b\u5f55\u8d26\u53f7",dataIndex:"username"},{title:"Active",dataIndex:"is_active",render:function(e){return!0===e?r.a.createElement(G.a,{color:"blue"},"\u542f\u7528"):r.a.createElement(G.a,{color:"red"},"\u7981\u7528")}}];return r.a.createElement("div",null,r.a.createElement(P.a,{bordered:!1},r.a.createElement(_.a,null,r.a.createElement(R.a,{span:12},r.a.createElement(Ee,{onChange:function(t){return e.handleSearch(t.target.value)},placeholder:"\u641c\u7d22\u8d44\u4ea7\u7ec4\u540d\u79f0",enterButton:!0,allowClear:!0})),r.a.createElement(R.a,{span:12,style:{textAlign:"right"}},r.a.createElement(z.a,{type:"primary",style:{marginRight:15},onClick:function(){return e.handleOperator("create")}},"\u6dfb\u52a0\u8d44\u4ea7\u7ec4")))),r.a.createElement(P.a,{bordered:!1},r.a.createElement(F.a,{size:"small",columns:t,rowKey:function(e){return e.id},dataSource:this.state.data,loading:{spinning:this.state.loading,tip:"\u52a0\u8f7d\u4e2d..."},pagination:this.state.pagination,onChange:this.handleTableChange})),r.a.createElement(K.a,{width:800,title:this.state.title,visible:this.state.isVisible,onOk:this.handleSubmit,onCancel:this.handleCancel},r.a.createElement(Ae,{mockData:this.state.assetList,wrappedComponentRef:function(t){return e.assetGroupForm=t},assetGroupInfo:this.state.assetGroupInfo,groupAssetsData:this.state.groupAssetsData})),r.a.createElement(K.a,{width:600,title:"\u8d44\u4ea7\u5217\u8868",visible:this.state.isAssetListVisible,footer:null,onCancel:function(){e.setState({isAssetListVisible:!1,groupAssetsData:[]})}},r.a.createElement(F.a,{size:"small",columns:a,rowKey:function(e){return e.id},dataSource:this.state.groupAssetsData,loading:{spinning:this.state.groupAssetsLoading,tip:"\u52a0\u8f7d\u4e2d..."}})))}}]),t}(r.a.Component),Ae=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(s)))).renderItem=function(e){return e.group?r.a.createElement("span",null,e.hostname,"(",e.group,")"):r.a.createElement("span",null,e.hostname)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.mockData,a=this.props.assetGroupInfo,n=this.props.groupAssetsData.map(function(e){return e.id});return r.a.createElement("div",null,r.a.createElement(q.a,Object.assign({layout:"horizontal"},{labelCol:{span:5},wrapperCol:{span:16}}),r.a.createElement(ve,{label:"\u7ec4\u540d"},e("name",{initialValue:a.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u4ea7\u7ec4\u7ec4\u540d"}]})(r.a.createElement(M.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u8d44\u4ea7\u7ec4\u7ec4\u540d"}))),r.a.createElement(ve,{label:"\u5907\u6ce8"},e("remark",{initialValue:a.remark})(r.a.createElement(ye,null))),r.a.createElement(ve,{label:"\u9009\u62e9\u8d44\u4ea7"},e("assets",{valuePropName:"targetKeys",initialValue:n})(r.a.createElement(be.a,{showSearch:!0,dataSource:t,rowKey:function(e){return e.id},titles:["\u5f85\u9009\u8d44\u4ea7","\u5df2\u9009\u8d44\u4ea7"],listStyle:{width:200,height:400},render:this.renderItem})))))}}]),t}(r.a.Component);Ae=q.a.create({})(Ae);var ke=ie.a.TabPane,Ce=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ie.a,{tabBarStyle:{margin:10},type:"card"},r.a.createElement(ke,{tab:"\u8d44\u4ea7",key:"1"},r.a.createElement(fe,null)),r.a.createElement(ke,{tab:"\u8d44\u4ea7\u7ec4",key:"2"},r.a.createElement(Oe,null))))}}]),t}(r.a.Component),Ie=(a(464),a(178)),je={getPermList:function(e){return Y({url:"/perms/",method:"get",params:e})},createPerm:function(e){return Y({url:"/perms/",method:"post",data:e})},updatePerm:function(e,t){return Y({url:"/perms/".concat(e,"/"),method:"patch",data:t})},deletePerm:function(e){return Y({url:"/perms/".concat(e,"/"),method:"delete"})},getPermAssetsList:function(e){return Y({url:"/permassets/".concat(e,"/"),method:"get"})},updatePermAssetsList:function(e,t){return Y({url:"/permassets/".concat(e,"/"),method:"put",data:t})},getPermUsersList:function(e){return Y({url:"/permusers/".concat(e,"/"),method:"get"})},updatePermUsersList:function(e,t){return Y({url:"/permusers/".concat(e,"/"),method:"put",data:t})}},Se=M.a.Search,we=q.a.Item,Le=M.a.TextArea,xe=Ie.a.TreeNode,Ve=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],loading:!1,pagination:"",selectedRowKeys:[],selectedItem:"",isAssetListVisible:!1,isUserListVisible:!1,permAssetsData:[],permUsersData:[],permAssetsLoading:!1,permUsersLoading:!1,isRoleVisible:!1,roleForm:"",roleTitle:"",roleInfo:"",roleType:"",isPermVisible:!1,permForm:"",groupLists:[],permAssetsList:[],isUserAuthVisible:!1,userAuthForm:"",userLists:[],permUsersList:[]},a.params={page:1,page_size:10,name__icontains:""},a.fetchData=function(){a.setState({loading:!0}),je.getPermList(a.params).then(function(e){var t=ee.pagination(Object(c.a)({},a.params,{count:e.count}));a.setState({data:e.results,loading:!1,selectedRowKeys:[],selectedItem:"",pagination:t})})},a.getPermUsers=function(e){a.setState({permUsersLoading:!0}),je.getPermUsersList(e).then(function(e){a.setState({permUsersData:e.results,permUsersLoading:!1})})},a.getPermAssets=function(e){a.setState({permAssetsLoading:!0}),je.getPermAssetsList(e).then(function(e){a.setState({permAssetsData:e.results,permAssetsLoading:!1})})},a.getGroupLists=function(){ue.getGroupLists().then(function(e){a.setState({groupLists:e})})},a.getPermAssetsList=function(e){je.getPermAssetsList(e).then(function(e){a.setState({permAssetsList:e.results})})},a.getUserLists=function(){Z.getUserLists().then(function(e){a.setState({userLists:e})})},a.getPermUsersList=function(e){je.getPermUsersList(e).then(function(e){a.setState({permUsersList:e.results})})},a.handleSearch=function(e){a.params.name__icontains=e,a.fetchData()},a.handleTableChange=function(e,t,n){a.params.page=e.current,a.params.page_size=e.pageSize,a.fetchData()},a.handleShowUserList=function(e){a.setState({isUserListVisible:!0}),a.getPermUsers(e)},a.handleShowAssetList=function(e){a.setState({isAssetListVisible:!0}),a.getPermAssets(e)},a.handleRoleCreate=function(){a.setState({isRoleVisible:!0,roleTitle:"\u6dfb\u52a0\u89d2\u8272",roleType:"create"})},a.handleRoleEdit=function(e){a.setState({isRoleVisible:!0,roleTitle:"\u7f16\u8f91\u89d2\u8272",roleInfo:e,roleType:"edit"})},a.handleRoleSubmit=function(){var e=a.roleForm.props.form.getFieldsValue();a.roleForm.props.form.validateFields(function(t,n){if(!t)if("create"===a.state.roleType)je.createPerm(e).then(function(t){N.a.success("\u89d2\u8272 ".concat(e.name," \u6dfb\u52a0\u6210\u529f"),1),a.fetchData()});else{var r=a.state.roleInfo.id;je.updatePerm(r,e).then(function(t){N.a.success("\u7528\u6237 ".concat(e.name," \u4fee\u6539\u6210\u529f"),1),a.fetchData()})}a.handleRoleCancel()})},a.handleRoleCancel=function(){a.roleForm.props.form.resetFields(),a.setState({isRoleVisible:!1,roleInfo:""})},a.handleRoleDelete=function(e){var t=e.id;K.a.confirm({title:"\u5220\u9664\u786e\u8ba4",content:"\u786e\u5b9a\u5220\u9664\u89d2\u8272 ".concat(e.name," \u5417?"),onOk:function(){je.deletePerm(t).then(function(e){N.a.success("\u5220\u9664\u6210\u529f",1),a.fetchData()})},onCancel:function(){N.a.info("\u53d6\u6d88\u5220\u9664",1)}})},a.handlePermission=function(){var e=a.state.selectedItem;e?(a.getGroupLists(),a.getPermAssetsList(e.id),a.setState({isPermVisible:!0})):K.a.info({title:"\u4fe1\u606f",content:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u89d2\u8272"})},a.handlePermCancel=function(){a.permForm.props.form.resetFields(),a.setState({isPermVisible:!1})},a.handlePermSubmit=function(){var e=a.permForm.props.form.getFieldsValue(),t=a.state.selectedItem.id;je.updatePermAssetsList(t,e).then(function(e){N.a.success("\u6743\u9650\u4fee\u6539\u6210\u529f",1),a.fetchData()}),a.handlePermCancel()},a.handleUserAuth=function(){var e=a.state.selectedItem;e?(a.getUserLists(),a.getPermUsersList(e.id),a.setState({isUserAuthVisible:!0})):K.a.info({title:"\u4fe1\u606f",content:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u89d2\u8272"})},a.handleUserAuthSubmit=function(){var e=a.userAuthForm.props.form.getFieldsValue(),t=a.state.selectedItem.id;je.updatePermUsersList(t,e).then(function(e){N.a.success("\u7528\u6237\u6388\u6743\u6210\u529f",1),a.fetchData()}),a.handleUserAuthCancel()},a.handleUserAuthCancel=function(){a.userAuthForm.props.form.resetFields(),a.setState({isUserAuthVisible:!1})},a.handleRowClick=function(e,t){var n=[e.id];a.setState({selectedRowKeys:n,selectedItem:e})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this,t=[{title:"id",dataIndex:"id"},{title:"\u89d2\u8272\u540d",dataIndex:"name"},{title:"\u6388\u6743\u8d44\u4ea7",dataIndex:"asset_count",render:function(t,a){return r.a.createElement("a",{href:"javascript:;",onClick:function(){return e.handleShowAssetList(a.id)}},"\u8d44\u4ea7\u5217\u8868(",t,")")}},{title:"\u6388\u6743\u7528\u6237",dataIndex:"user_count",render:function(t,a){return r.a.createElement("a",{href:"javascript:;",onClick:function(){return e.handleShowUserList(a.id)}},"\u7528\u6237\u5217\u8868(",t,")")}},{title:"Active",dataIndex:"is_active",render:function(e){return!0===e?r.a.createElement(G.a,{color:"blue"},"\u542f\u7528"):r.a.createElement(G.a,{color:"red"},"\u7981\u7528")}},{title:"\u5907\u6ce8",dataIndex:"remark"},{title:"\u64cd\u4f5c",width:150,render:function(t,a){return r.a.createElement("span",null,r.a.createElement(z.a,{type:"primary",size:"small",onClick:function(){return e.handleRoleEdit(a)}},"\u7f16\u8f91"),r.a.createElement(T.a,{type:"vertical"}),r.a.createElement(z.a,{type:"danger",size:"small",onClick:function(){return e.handleRoleDelete(a)}},"\u5220\u9664"))}}],a=[{title:"id",dataIndex:"id"},{title:"\u4e3b\u673a\u540d",dataIndex:"hostname"},{title:"IP\u5730\u5740",dataIndex:"ip"},{title:"\u7aef\u53e3",dataIndex:"port"},{title:"\u8fdc\u7a0b\u767b\u5f55\u8d26\u53f7",dataIndex:"username"},{title:"Active",dataIndex:"is_active",render:function(e){return!0===e?r.a.createElement(G.a,{color:"blue"},"\u542f\u7528"):r.a.createElement(G.a,{color:"red"},"\u7981\u7528")}}],n=[{title:"id",dataIndex:"id"},{title:"\u7528\u6237\u540d",dataIndex:"username"},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u90ae\u7bb1",dataIndex:"email"},{title:"\u7ba1\u7406\u5458",dataIndex:"is_superuser",render:function(e){return!0===e?r.a.createElement(G.a,{color:"blue"},"\u542f\u7528"):r.a.createElement(G.a,{color:"red"},"\u7981\u7528")}},{title:"Active",dataIndex:"is_active",render:function(e){return!0===e?r.a.createElement(G.a,{color:"blue"},"\u542f\u7528"):r.a.createElement(G.a,{color:"red"},"\u7981\u7528")}}],s={type:"radio",selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,a){e.handleRowClick(a[0],t[0])}};return r.a.createElement("div",null,r.a.createElement(P.a,{bordered:!1},r.a.createElement(_.a,null,r.a.createElement(R.a,{span:12},r.a.createElement(Se,{onChange:function(t){return e.handleSearch(t.target.value)},placeholder:"\u641c\u7d22\u89d2\u8272\u540d",enterButton:!0,allowClear:!0})),r.a.createElement(R.a,{span:12,style:{textAlign:"right"}},r.a.createElement(z.a,{type:"primary",onClick:this.handleRoleCreate,style:{marginRight:15}},"\u6dfb\u52a0\u89d2\u8272"),r.a.createElement(z.a,{type:"primary",onClick:this.handlePermission,style:{marginRight:15}},"\u6743\u9650\u8bbe\u7f6e"),r.a.createElement(z.a,{type:"primary",onClick:this.handleUserAuth,style:{marginRight:15}},"\u7528\u6237\u6388\u6743")))),r.a.createElement(P.a,{bordered:!1},r.a.createElement(F.a,{size:"small",onRow:function(t,a){return{onClick:function(){e.handleRowClick(t,a)}}},columns:t,rowKey:function(e){return e.id},dataSource:this.state.data,loading:{spinning:this.state.loading,tip:"\u52a0\u8f7d\u4e2d..."},pagination:this.state.pagination,rowSelection:s,onChange:this.handleTableChange})),r.a.createElement(K.a,{width:600,title:"\u8d44\u4ea7\u5217\u8868",visible:this.state.isAssetListVisible,footer:null,onCancel:function(){e.setState({isAssetListVisible:!1})}},r.a.createElement(F.a,{size:"small",columns:a,rowKey:function(e){return e.id},dataSource:this.state.permAssetsData,loading:{spinning:this.state.permAssetsLoading,tip:"\u52a0\u8f7d\u4e2d..."}})),r.a.createElement(K.a,{width:600,title:"\u7528\u6237\u5217\u8868",visible:this.state.isUserListVisible,footer:null,onCancel:function(){e.setState({isUserListVisible:!1})}},r.a.createElement(F.a,{size:"small",columns:n,rowKey:function(e){return e.id},dataSource:this.state.permUsersData,loading:{spinning:this.state.permUsersLoading,tip:"\u52a0\u8f7d\u4e2d..."}})),r.a.createElement(K.a,{width:600,title:this.state.roleTitle,visible:this.state.isRoleVisible,onOk:this.handleRoleSubmit,onCancel:this.handleRoleCancel},r.a.createElement(Ue,{wrappedComponentRef:function(t){return e.roleForm=t},roleInfo:this.state.roleInfo})),r.a.createElement(K.a,{title:"\u6743\u9650\u8bbe\u7f6e",width:600,visible:this.state.isPermVisible,onOk:this.handlePermSubmit,onCancel:this.handlePermCancel},r.a.createElement(Fe,{wrappedComponentRef:function(t){return e.permForm=t},roleInfo:this.state.selectedItem,groupLists:this.state.groupLists,permAssetsList:this.state.permAssetsList})),r.a.createElement(K.a,{title:"\u7528\u6237\u6388\u6743",width:800,visible:this.state.isUserAuthVisible,onOk:this.handleUserAuthSubmit,onCancel:this.handleUserAuthCancel},r.a.createElement(Pe,{userLists:this.state.userLists,permUsersList:this.state.permUsersList,roleInfo:this.state.selectedItem,wrappedComponentRef:function(t){return e.userAuthForm=t}})))}}]),t}(r.a.Component),De={labelCol:{span:5},wrapperCol:{span:16}},Ue=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.roleInfo;return r.a.createElement(q.a,Object.assign({layout:"horizontal"},De),r.a.createElement(we,{label:"\u89d2\u8272\u540d\u79f0"},e("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}],initialValue:t.name})(r.a.createElement(M.a,{type:"text",placeholder:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0"}))),r.a.createElement(we,{label:"Active"},e("is_active",{valuePropName:"checked",initialValue:""===t||t.is_active})(r.a.createElement(U.a,null))),r.a.createElement(we,{label:"\u5907\u6ce8"},e("remark",{initialValue:t.remark})(r.a.createElement(Le,null))))}}]),t}(r.a.Component);Ue=q.a.create({})(Ue);var Fe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(s)))).renderTreeNodes=function(e){return e.map(function(e){return r.a.createElement(xe,{title:e.name,key:e.name},e.assets.map(function(e){return r.a.createElement(xe,{title:e.hostname,key:e.id})}))})},a.getCheckedKeys=function(e){return e.map(function(e){return e.id})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.roleInfo,a=this.props.groupLists,n=this.props.permAssetsList,s=this.getCheckedKeys(n);return r.a.createElement(q.a,Object.assign({layout:"horizontal"},De),r.a.createElement(we,{label:"\u89d2\u8272\u540d\u79f0"},r.a.createElement(M.a,{type:"text",disabled:!0,placeholder:t.name})),r.a.createElement(we,{label:"\u9009\u62e9\u8d44\u4ea7"},e("assets",{valuePropName:"checkedKeys",trigger:"onCheck",initialValue:s})(r.a.createElement(Ie.a,{checkable:!0,defaultExpandAll:!0},r.a.createElement(xe,{title:"\u8d44\u4ea7\u6743\u9650",key:"all"},this.renderTreeNodes(a))))))}}]),t}(r.a.Component);Fe=q.a.create({})(Fe);var Pe=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).getTargetKeys=function(e){return e.map(function(e){return e.id})},a.filterOption=function(e,t){return t.username.indexOf(e)>-1},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.roleInfo,a=this.props.userLists,n=this.props.permUsersList,s=this.getTargetKeys(n);return r.a.createElement(q.a,Object.assign({layout:"horizontal"},De),r.a.createElement(we,{label:"\u89d2\u8272\u540d\u79f0"},r.a.createElement(M.a,{type:"text",disabled:!0,placeholder:t.name})),r.a.createElement(we,{label:"\u9009\u62e9\u7528\u6237"},e("users",{valuePropName:"targetKeys",initialValue:s})(r.a.createElement(be.a,{showSearch:!0,rowKey:function(e){return e.id},dataSource:a,titles:["\u5f85\u9009\u7528\u6237","\u5df2\u9009\u7528\u6237"],listStyle:{width:200,height:400},render:function(e){return e.username}}))))}}]),t}(r.a.Component);Pe=q.a.create({})(Pe);a(466);var _e=a(179),Re=(a(223),a(9)),Te=function(){return Y({url:"/statisticinfo/",method:"get"})},ze=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={user_count:0,asset_count:0},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;Te().then(function(t){e.setState({user_count:t.user_count,asset_count:t.asset_count})})}},{key:"render",value:function(){return r.a.createElement("div",{style:{padding:"30px"}},r.a.createElement(_.a,{gutter:16},r.a.createElement(R.a,{span:1}),r.a.createElement(R.a,{span:11},r.a.createElement(P.a,{title:"\u7528\u6237",bordered:!1},r.a.createElement(y.b,{to:"/users"},r.a.createElement(_e.a,{title:"\u7528\u6237\u7edf\u8ba1",value:this.state.user_count,prefix:r.a.createElement(Re.a,{type:"user"})})))),r.a.createElement(R.a,{span:11},r.a.createElement(P.a,{title:"\u8d44\u4ea7",bordered:!1},r.a.createElement(y.b,{to:"/assets"},r.a.createElement(_e.a,{title:"\u8d44\u4ea7\u7edf\u8ba1",value:this.state.asset_count,prefix:r.a.createElement(Re.a,{type:"hdd"})})))),r.a.createElement(R.a,{span:1})))}}]),t}(r.a.Component),Ge=(a(479),a(245)),Ne=(a(481),q.a.Item),Ke=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={error:""},a.handleLogin=function(){var e=a.props.form.getFieldsValue(),t=a.props.location.state;console.log(t),a.props.form.validateFields(function(t,n){t||Q.login(e.username,e.password).then(function(e){N.a.success("\u767b\u5f55\u6210\u529f",1),$.setToken(e.token),a.props.history.push("/")}).catch(function(e){a.setState({error:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"})})})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){(0,this.props.dispatch)(m("")),$.removeToken()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"login"},r.a.createElement(P.a,{bordered:!1,className:"login-box"},r.a.createElement(q.a,{style:{width:350}},r.a.createElement(Ne,{style:{textAlign:"center"}},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:"logo.png",alt:""}),r.a.createElement("b",null,"JMS\u8df3\u677f\u673a"))),r.a.createElement("span",null,""===this.state.error?"":r.a.createElement(Ge.a,{message:this.state.error,type:"warning",showIcon:!0,banner:!0})),r.a.createElement(Ne,null,e("username",{rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:"guest"})(r.a.createElement(M.a,{prefix:r.a.createElement(Re.a,{type:"user"}),placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),r.a.createElement(Ne,null,e("password",{rules:[{required:!0,message:"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:"guest"})(r.a.createElement(M.a,{prefix:r.a.createElement(Re.a,{type:"lock"}),type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"}))),r.a.createElement(Ne,null,r.a.createElement(z.a,{type:"primary",block:!0,onClick:this.handleLogin},"\u767b\u5f55")))))}}]),t}(r.a.Component),qe=Object(l.b)()(Object(v.f)(q.a.create()(Ke))),Me=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(g.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).getInfo=function(){Q.getInfo().then(function(e){(0,a.props.dispatch)(m(e.name))}).catch(function(e){a.props.history.push("/login")})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return $.getToken()?(""===this.props.userName&&this.getInfo(),r.a.createElement("div",null,this.props.children)):r.a.createElement(v.a,{to:"/login"})}}]),t}(r.a.Component),Be=Object(l.b)(function(e){return{userName:e.userName}})(Object(v.f)(Me)),Je=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement(C,null,r.a.createElement(v.d,null,r.a.createElement(v.b,{path:"/login",component:qe}),r.a.createElement(v.b,{path:"/",render:function(){return r.a.createElement(Be,null,r.a.createElement(D,null,r.a.createElement(v.b,{exact:!0,path:"/",render:function(){return r.a.createElement(v.a,{to:"/home"})}}),r.a.createElement(v.b,{path:"/home",component:ze}),r.a.createElement(v.b,{path:"/users",component:re}),r.a.createElement(v.b,{path:"/assets",component:Ce}),r.a.createElement(v.b,{path:"/perms",component:Ve})))}}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var We=Object(o.b)(d);i.a.render(r.a.createElement(l.a,{store:We},r.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[248,1,2]]]);